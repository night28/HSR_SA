\section{Benutzerhandbuch}

\subsection{Updates}
Es ist wichtig das DNA Center auf einem aktuellen Stand zu halten, da es noch eher in einem frühen Release steckt.

Auf folgender Webseite veröffentlicht Cisco die Sicherheitslücken und erklärt gleich zu welcher Version das DNA Center geupdatet werden muss:
\url{https://tools.cisco.com/security/center/publicationListing.x?resourceIDs=233151\&apply=1\&totalbox=1\&pt0=Cisco\&cp0=233151\#~FilterByProduct}

\subsection{Design}
Mit dem Design wird die physische Struktur bis auf die Gebäude genau hinterlegt. Zusätzlich werden Informationen hinterlegt, die das DNA Center während der Provisionierung auf die Netzwerkkomponenten schreibt. 

\subsubsection{Site hinzufügen}
\begin{enumerate}
	\item Ausgehend vom DNA Center Dashboard nach \textit{Design $\rightarrow$ Network Hierarchy} navigieren. 
	\item \textit{Add Site} wählen. 
	\item Im neuen Popup den gewünschten Namen eingeben.
	\item \textit{Add} anwählen. 	
\end{enumerate}

\subsubsection{Gebäude zur Site hinzufügen}
\begin{enumerate}
	\item Ausgehend vom DNA Center Dashboard nach \textit{Design $\rightarrow$ Network Hierarchy} navigieren. 
	\item \textit{Add Site} wählen. 
	\item Im neuen Popup den gewünschten Namen eingeben.
	\item \textit{Building} anwählen
	\item Adresse und/oder Koordinaten eingeben.
	\item \textit{Add} anwählen.
\end{enumerate}


\subsubsection{Netzwerkdienste Konfigurieren}
\begin{enumerate}
	\item Ausgehend vom DNA Center Dashboard nach \textit{Design $\rightarrow$ Network Settings} navigieren. 
	\item \textit{Global} wählen. 
	\item Bei \textit{AAA Server Network} und \textit{Client/Endpoint} anwählen.
	\item Bei \textit{Network $\rightarrow$ ISE} wählen und entsprechende IP Adresse eingeben.
	\item Bei \textit{Network $\rightarrow$ RADIUS} wählen und entsprechende IP Adresse eingeben.
	\item Bei \textit{Client/Endpoint $\rightarrow$ Servers $\rightarrow$ ISE} wählen und entsprechende IP Adresse eingeben.
	\item Bei \textit{Client/Endpoint $\rightarrow$ Protocol $\rightarrow$ RADIUS} wählen und entsprechende IP Adresse eingeben.
	\item Bei \textit{DHCP Server} das \textbf{PLUS}-Zeichen anklicken und die IP Adresse des DHCP Servers (in diesem Fall Adresse des Infoblox) hinterlegen. 
	\item \textit{SYSLOG Server}, \textit{SNMP Server} und \textit{Netflow Collector Server} können leer gelassen werden.
	\item Bei \textit{Message of the day} ist eine für den Netzwerkadministrator aufstellende, aber nicht nervige Willkommensnachricht einzugeben. 
	\item Mit einem Klick auf \textit{Save} ist alles abzuspeichern.
\end{enumerate}

\subsubsection{Device Credentials hinterlegen}
\begin{enumerate}
	\item Ausgehend vom DNA Center Dashboard nach \textit{Design $\rightarrow$ Network Settings $\rightarrow$ Device Credentials} navigieren. 
	\item \textit{Add} wählen. 
	\item Entsprechende(r) \textit{Name}, \textit{Username}, \textit{Password} und \textit{Enable Password} eingeben.
	\item Mit einem Klick auf \textit{Save} alles abspeichern.
\end{enumerate}

\subsubsection{IP Address Pools hinzufügen}
Das DNA Center benötigt verschiedene IP Adressen Pools. 
\begin{itemize}
	\item 1 x /23 (mindestens empfohlen) für die LAN Automation
	\item 1 x /24 (mindestens empfohlen) für die Border
	\item Für jedes VN ein Pool. Die Grösse ist abhängig von den Anforderungen.
\end{itemize}
\begin{enumerate}
	\item Ausgehend vom DNA Center Dashboard nach \textit{Design $\rightarrow$ Network Settings $\rightarrow$ IP Address Pools} navigieren. 
	\item \textit{Add IP Pool} wählen. 
	\item Nun gilt es einen IP Pool Name, ein IP Subnet, ein CIDR Präfix, eine Gateway IP Adresse einzugeben.
	\item Der korrekte DHCP Server und DNS Server ist per Dropdown auszuwählen.
	\item Mit einem Klick auf \textit{Save} alles abspeichern.
\end{enumerate}

\subsubsection{Netzwerkprofile zuweisen}
Um den Geräten Templates zugeweisen zu können, müssen die Sites Profile zugewiesen werden.
\begin{enumerate}
	\item Ausgehend vom DNA Center Dashboard nach \textit{Design $\rightarrow$ Network Profiles} navigieren. 
	\item In der Zeile von \textit{Default Swichting Profile} auf \textit{0 Sites} klicken. 
	\item Im neuen Popup alle Sites über das Multidropdown-Menü hinzufügen.
	\item Mit \textit{Save} das Netzwerkprofil speichern.
\end{enumerate}

\subsection{Access Control Policies}

\subsubsection{Virtual Network}
Virtuelle Netzwerke sind isolierte Routing- und Switching-Umgebungen. Standardmässig können Hosts die in seperaten virtuellen Netzwerken existieren nicht miteinander kommunizieren. Mit Hilfe von virtuellen Netzwerken kann das physische Netzwerk in mehrere logische Netzwerk geteilt werden. Ein typischer Anwendungsfall ist die Segmentierung von Gästen, Mitarbeitern und Kontraktor in getrennte Gruppen, so dass der Zugriff nur auf Teile des Netzwerkes erlaubt oder eingeschränkt werden kann. Die verschiedenen Arten von Netzwerken sind:

\begin{itemize}
	\item Gast-Netzwerk: Netzwerkverbindungen, die von einem Unternehmen zur Verfügung gestellt werden, um seinen Gästen den Zugang zum Internet und zum eigenen Unternehmen zu ermöglichen, ohne die Sicherheit des Host-Unternehmensnetzwerks zu beeinträchtigen. Gäste können auf das Internet zugreifen, aber nicht auf interne Anwendungen, die im Rechenzentrum gehostet werden.
	\item Mitarbeiter-Netzwerk: Netzwerkverbindungen, die den Zugriff auf das Internet und interne Anwendungen ermöglichen. Diese Gruppe kann weiter segmentiert werden, um z.B. den Zugriff innerhalb des Unternehmensnetzwerks zu ermöglichen oder einzuschränken, für bestimmte interne Anwendungen, Laborumgebungen und Server. Ein Finanzangestellter z.B. braucht keinen Zugang zum Entwicklungslabor. Ebenso benötigt ein Entwickler keinen Zugriff auf eine Verkaufsprognose. Diese können ohne Probleme in weitere virtuelle Netzwerke segmentiert werden.
	\item Kontraktor-Netzwerk: Netzwerkverbindung, die es den Benutzern ermöglicht, auf das Internet und auf unternehmensspezifische Anwendungen innerhalb des Unternehmensnetzwerks zuzugreifen. Ein virtuelles Netzwerk kann sich über mehrere Standorte und Netzwerkdomänen (Wireless, Campus und WAN) erstrecken.
\end{itemize}

\subsubsection{Virtual Network hinzufügen}
\begin{enumerate}
	\item Ausgehend vom DNA Center Dashboard nach \textit{Policy $\rightarrow$ Virtual Network} navigieren. 
	\item \textbf{PLUS} Zeichen anwählen.
	\item Der gewünschte Virtual Network Name ist einzugeben.
	\item Die gewünschten Scalable Groups können nun der Drap\&Drop in das Virtual Network gezogen werden.
	\item Die Ansicht wird mit \textit{Save} gespeichert.
\end{enumerate}

\subsubsection{Scalable Group}
Skalierbare Gruppen umfassen eine Gruppierung von Benutzern, Endgeräten oder Ressourcen, die dieselben Anforderungen an die Zugriffskontrolle stellen. Diese Gruppen (in Cisco ISE als Sicherheitsgruppen oder SGs bekannt) werden auf dem Cisco ISE definiert. Eine skalierbare Gruppe kann nur ein Element (ein Benutzer, ein Endgerät oder eine Ressource) enthalten.

\paragraph{Scalable Group hinzufügen}
\begin{enumerate}
	\item Ausgehend vom DNA Center Dashboard nach \textit{Policy $\rightarrow$ Registry $\rightarrow$ Scalable Groups} navigieren. 
	\item \textit{Add Groups} wählen.
	\item Bei bedarf ist ein Login in Cisco ISE erforderlich.
	\item \textit{+ Add} anklicken.
	\item Im Formular ist Name, Icon und Beschreibung im neuen Formular einzugeben und mit \textit{Submit} zu speichern. 
\end{enumerate}

\subsubsection{Access Control Contract}
Ein Zugriffsvertrag ist eine Security Group Access Control List (SGACL). Sie definiert das Regelwerk, dass die Netzwerkinteraktion zwischen Quelle und Ziel in einer Zugriffskontrollrichtlinie regelt.

\subsubsection{Group-based Access Control Policy}
Gruppenbasierte Zugriffskontrollrichtlinien sind Security Group Access Control Lists (SGACLs). DNA Center hat den Cisco ISE integriert, um den Prozess der Erstellung und Pflege von SGACLs zu vereinfachen. Während der initialen Integration von DNA Center und Cisco ISE werden skalierbare Gruppen und Richtlinien, die in Cisco ISE vorhanden sind, an das DNA Center weitergegeben und in das standardmäßige virtuelle Netzwerk eingefügt.

Das folgende Beispiel zeigt den Prozess der Authentifizierung und Zugriffskontrolle, den ein Benutzer durchläuft, wenn er sich in das Netzwerk einloggt:
\begin{enumerate}
	\item Ein Benutzer verbindet sich mit einem Port auf einem Switch und stellt seine Zugangsdaten zur Verfügung.
	\item Der Switch kontaktiert Cisco ISE.
	\item Cisco ISE authentifiziert den Benutzer und lädt die SGACLs auf den Port, mit dem der Benutzer verbunden ist.
	\item  Dem Benutzer wird der Zugang zu bestimmten Benutzern oder Geräten (Servern) auf der Grundlage des in die SGACL gewährt.
\end{enumerate}

\subsubsection{Workflow}
Workflow zur Konfiguration einer gruppenbasierten Zugriffskontrollrichtlinie.

\begin{table}[H]
	\rowcolors{2}{gray!25}{white}
	\centering
	\begin{tabularx}{\textwidth}{p{2 cm} | X | p{2 cm}}
		\rowcolor{gray!50}
		\textbf{Schritt} & \textbf{Aktion} & \textbf{Zweck} \\
		\hline	
		1 & Erstellen eines virtuellen Netzwerkes. Abhängig von der Konfiguration des Unternehmens und seinen Zugriffsanforderungen und -beschränkungen können die Gruppen in verschiedene virtuelle Netzwerke unterteilt werden, um eine weitere Segmentierung zu ermöglichen. & (Optional) \\
		2 & Erstellen einer skalierbaren Gruppe. Nach der Integration von Cisco ISE werden die in ISE vorhandenen skalierbaren Gruppen in das DNA Center übertragen. Wenn eine skalierbare Gruppe nicht besteht, kann diese direkt angelegt werden. & (Optional) \\
		3 & Erstellen eines Zugriffskontrollvertrag (access control contract). Ein Contract definiert eine Reihe von Regeln, die eine Aktion (erlauben oder verweigern), die Netzwerkgeräte basierend auf dem Datenverkehr durchführen, der bestimmten Protokollen oder Ports entspricht. & \\
		4 & Erstellen einer gruppenbasierten Zugriffskontrollrichtlinie (group-based access control policy). Die Zugriffskontrollrichtlinie definiert den Zugriffskontrollvertrag, der den Verkehr zwischen den skalierbaren Quell- und Zielgruppen regelt. & \\
		
	\end{tabularx}
	\caption{Workflow zur Erstellung der Access Control Policies}
	\label{tab:Workflow zur Erstellung der Access Control Policies}
\end{table}

\subsection{Erstellen einer Group-Based Access Control (Fabric)}
\begin{enumerate}
	\item Wähle auf der DNA Center Homepage \textit{Policy $\rightarrow$ Contracts $\rightarrow$ Access Contracts}.
	\item Klick \textit{Add Contract}.
	\item Im Dialogfenster des \textit{Contract Editor} kann ein Namen und eine Beschreibung für den Vertrag erfasst werden.
	\item Wähle in der Dropdown-Liste \textit{Implicit Action} entweder \textit{Deny} oder \textit{Permit}.
	\item Wähle aus der Dropdown-Lste in der Spalte \textit{Port/Protocol} einen Port oder ein Protokoll aus. Hinweis: Wenn das DNA Center nicht über den Port oder das Protokoll verfügt welches benötigt wird, kann dies selbst erstellt werden. Klicke hierzu auf \textit{Add Port/Protocol}, füge alle erforderlichen Informationen hinzu und klicke auf \textit{Save}.
	\item (Optional) Um weitere Regeln in den Vertrag aufzunehmen, klicke auf \textit{Add} und wiederhole Schritt 5 und 6.
	\item Klicke \textit{Save}.
\end{enumerate}

\subsection{Provision}
\subsubsection{Seed Device manuell konfigurieren}

\subsubsection{LAN Automation durchführen}

\subsubsection{Netzwerkkomponenten Provisionieren}

\subsubsection{Netzwerkkomponenten Provisionieren}

\subsubsection{Fabric erstellen}
\paragraph{Border + CP festlegen}
\paragraph{Intermediate Nodes festlegen}
\paragraph{Edge Nodes festlegen}

\subsubsection{Host Onboarding}

\paragraph{Virtual Networks auswählen}
Um ein Virtual Network verwenden zu können, muss dies in der entsprechenden Fabric zuerst aktiviert und ein IP zugewiesen werden. 
\begin{enumerate}
	\item Ausgehend vom DNA Center Dashboard nach \textit{Provision $\rightarrow$ Fabric $\rightarrow$ FABRIC\_NAME $\rightarrow$ Host Onboarding} navigieren. 
	\item Im Abschnitt werden nun alle gewünschten \textit{Virtual Networks} ausgewählt. 
	\item Im neuen Popup wird der gewünschte IP Pool ausgewählt. 
	\item Der Dialog wird mit \textit{Update} geschlossen.
\end{enumerate}


\paragraph{Ports konfigurieren}
Für jeden Port, der nicht bereits für die Konnektivität zwischen den Fabric Nodes verwendet wird, kann ein Addresspool, eine Gruppe und eine Authentifizierungsmethode (Siehe: \ref{authentifizierungsmethoden}) definiert werden. 
\begin{enumerate}
	\item Ausgehend vom DNA Center Dashboard nach \textit{Provision $\rightarrow$ Fabric $\rightarrow$ FABRIC\_NAME $\rightarrow$ Host Onboarding} navigieren. 
	\item Im \textit{Select Port Assignment} werden die zu konfigurierende Ports \textit{Virtual Networks} ausgewählt. 
	\item Für die ausgewählten Ports wird nun ein \textit{Address Pool}, \textit{Scalable Group}, \textit{Voice Pool} und eine Authentifizierungsmethode gewählt. 
	\item Die Änderungen werden mit einem Klick auf \textit{Save} gespeichert. 
\end{enumerate}



